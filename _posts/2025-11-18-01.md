---
layout: post
title: "CPBL 스탯 사이트 만들기 1일차"
date: 2025-11-18
author: lebronisbest
tags: [일반]
---

![](/assets/img/기계흥분.jpg)

저에게는 오랜 꿈이 있습니다.

어린 시절부터 야구 스탯을 보면 흥분을 했었던 저는, 1982년부터 현재까지 KBO의 모든 시즌별 스탯 리더를 외우는 등 지금 생각해도 이상한 행동을 했더랬죠. (물론 지금은 대부분 까먹었습니다.)

그런 저의 흥미는 자연스럽게 야구 스탯 사이트를 운영하는 것으로 향했으나 아니 글쎄... 한국 야구의 현실에서 그건 말 그대로 꿈이었습니다. 일단 대중에게 공개되어있는 기록의 범위가 너무 제한적이고 그마저도 스포츠투아이와의 계약에 묶여있어서 이걸 그대로 활용했다가는 그대로 고소를 맞는 엔딩으로 이어질 가능성이 몹시도 커보였습니다.

저는 그러던 중, 정말 우연한 계기로 '태상위 리그' CPBL의 홈페이지에 방문하게 됩니다. 이 곳에서 저는 마치 엘도라도를 찾은 선원의 기분을 느꼈고 저의 심장은 다시 뛰기 시작했습니다. CPBL의 홈페이지는 1990년부터 2025년까지의 모든 게임의 박스스코어를 제공하고 있었습니다. 게다가 2018년부터 최근까지는 모든 게임의 문자 중계도 볼 수 있었죠. 그 외에도 선수 프로필 데이터와 2군 데이터도 정말 풍족하게 갖춰져 있었습니다.

저는 이걸 보고 운명처럼 CPBL 스탯 사이트 운영이라는 거대한 목표에 뛰어들기로 결정했습니다.

## 1) 시장 조사

우선 사이트를 만들기 위해서는 시장조사가 필요했습니다. CPBL의 스탯을 볼 수 있는 사이트는 크게 3가지 정도였습니다.

[CPBL 공식 사이트](https://en.cpbl.com.tw/)

말 그대로 CPBL의 공식 사이트입니다. 

[Baseball Referrence](https://www.baseball-reference.com/)

유명한 사이트죠. 베이스볼 레퍼런스입니다.

[Rebas](https://www.rebas.tw/)

거의 타이완의 베이스볼 프로스펙터스라고 봐도 될 정도로 훌륭한 사이트입니다. 2018년부터 2025년까지의 기록을 고급 지표를 포함해서 모두 공개하고 있었습니다. 단, 중국어 페이지만 제공하는 단점이 있었습니다.

## 2) 데이터 수집과 문제점
## 3) 레트로시트 에이전트를 만들자

결국 제가 맞이한 이 프로젝트 최고의 문제점은 바로 코딩이었습니다. 눈 앞에 황금과도 같은 데이터들이 주어져있는데 저에게는 그 황금을 제대로 만져볼 수 도 없는 상황이었던거죠... 

일단 저는 비전공자이며, 거기다가 문과 출신입니다. python은 직접 사용할 수 있는 건 hello world를 출력하는 것 밖에 없지요. 당연히 지금 이 글을 쓰는 것도 엄청나게 어려움을 겪고 있으며 커서 AI가 없다면 깃헙 블로그에 글을 올리지도 못하는 수준입니다.

하지만 CPBL 사이트라는 원대한 꿈을 이루기 위해... 저는 CPBL의 문자 중계를 RetroSheet의 형태로 바꿔주는 에이전트를 만들기에 도전해보기로 했습니다.

생각해보니 저에게는 문제점이 하나 더 있었습니다. 바로 돈이 없다는겁니다. 그래서 Open AI Agents는 후보에서 제외했습니다. 대신에, 중국어에 강하고 무료로 사용할 수 있는 qwen이나 deepseek를 로컬에서 사용하기로 했죠. 개발은 claude code와 codex, 그리고 커서 AI를 사용해 바이브 코딩을 하기로 했습니다. 개발에 관한 상식은 사실상 전무하기에, 토론과 논의는 ChatGPT와 함께 진행했습니다.

![내가 GPT한테 할 수 있는 질문 수준](/assets/img/해줘.png)

만드는 과정은... 내가 만든걸 설명할 수도 없는 수준의 실력이라 적을까 말까 고민했지만 그래도 적어보기로 했습니다.

CPBL의 홈페이지에서 얻을 수 있는 게임의 raw data는 크게 타격 정보를 담당하는 battingjson과 투구 정보를 담당하는 pitchingjson, 라인업을 담당하는 firstsnojson 그리고 문자중계에 사용되는 livelogjson이 있습니다. 바로 이 livelogjson에 사실상 거의 모든 정보가 다 들어있는데요. 문제는 레트로시트에서 기대하는 타구 처리 정보, 주자 진루 정보와 같은 세부 정보는 'content'라는 영역에 표시되어있다는 점입니다. 이 부분은 CPBL 사이트의 공식 문자중계를 그대로 중국어로 쓴 부분인데요. 한국과는 다르게 '좌익수 플라이 아웃' 이런식으로 표시되는게 아니라 '좌익수 쪽으로 높이 뜬공, A가 잡아서 3루로 송구, 2루 주자 B 3루로 진루 성공' 이런식으로 되어있기 때문에 (물론 간단하게 작성된 사례도 많습니다.) 파싱을 하기가 굉장히 까다로웠습니다.

그래서 저는 룰 엔진이 1차적으로 content 외의 항목에서 얻을 수 있는 데이터들을 파싱한 뒤, content와 파싱된 데이터들을 다시 LLM에게 넘겨서 나머지 데이터들을 채우는 에이전트를 만들어 보았습니다. 
